(()=>{"use strict";const t=[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],o=Math.PI,e=Math.PI/2,l=3*Math.PI/2;(()=>{const a=document.getElementById("canvas");let n=300,h=300,f=0,c=0,M=0;const r=64,s=[1,1,1,1,1,1,1,1,1,0,0,0,1,0,0,1,1,0,1,0,1,0,0,1,1,0,1,0,1,0,0,1,1,0,1,0,0,0,0,1,1,0,1,0,1,0,0,1,1,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1],i=()=>{for(let t=0;t<8;t++)for(let o=0;o<8;o++){const e=a.getContext("2d");e.fillStyle=1===s[8*o+t]?"#ffffff":"#000000";const l=t*r,n=o*r,h=l+r,f=n,c=l+r,M=n+r,i=l,d=n+r;e.beginPath(),e.moveTo(l+1,n+1),e.lineTo(h-1,f+1),e.lineTo(c-1,M-1),e.lineTo(i+1,d-1),e.closePath(),e.fill()}},d=(t,o,e,l)=>Math.sqrt((e-t)**2+(l-o)**2);i(),(()=>{const r=a.getContext("2d");r.fillStyle="yellow";r.fillRect(n,h,8,8);const y=()=>{const t=.0174533;let a=!1,f=M-30*t;f<0&&(f+=2*o),f>2*o&&(f-=2*o);let c,r,i,y,g,m,K,S,u,T=n,v=h;for(let k=0;k<60;k++){y=0;let w=1e7,x=-1/Math.tan(f);for(f>o?(m=64*Math.floor(h/64)-1e-4,g=(h-m)*x+n,K=-64,S=-K*x):f<o?(m=64*Math.floor(h/64)+64,g=(h-m)*x+n,K=64,S=-K*x):(g=n,m=h,y=8);y<8;)r=Math.floor(g/64),c=Math.floor(m/64),i=8*c+r,i>0&&i<64&&1===s[i]?(y=8,T=g,v=m,w=d(n,h,T,v,f)):(g+=S,m+=K,y+=1);y=0;let C=1e7,R=n,b=h,A=-Math.tan(f);for(f>e&&f<l?(g=64*Math.floor(n/64)-1e-4,m=(n-g)*A+h,S=-64,K=-S*A):f<e||f>l?(g=64*Math.floor(n/64)+64,m=(n-g)*A+h,S=64,K=-S*A):(g=n,m=h,y=8);y<8;)r=Math.floor(g/64),c=Math.floor(m/64),i=8*c+r,i>0&&i<64&&1===s[i]?(y=8,R=g,b=m,C=d(n,h,R,b,f)):(g+=S,m+=K,y+=1);C<w&&(g=R,m=b,u=C,a=!0),C>w&&(g=T,m=v,u=w,a=!1);I(n+4,h+4,g,m);let E=M-f;E<0&&(E+=2*o),E>2*o&&(E-=2*o),u*=Math.cos(E),P(8*k+530,20480/u,g,m,f,a),f+=t,f<0&&(f+=2*o),f>2*o&&(f-=2*o)}},P=(o,e,l,n,h,f)=>{const c=a.getContext("2d");let M=32/e,r=0;e>320&&(r=(e-320)/2,e=320);const s=160-e/2;let i,d,y=r*M;for(f?(d=Math.floor(n/2%32),h>Math.PI/2&&h<3*Math.PI/2&&(d=31-d)):(d=Math.floor(l/2%32),h<Math.PI&&(d=31-d)),i=0;i<e;i++){const e=255*t[32*Math.floor(y)+Math.floor(d)];c.fillStyle=`rgb(\n          ${e},\n          ${e},\n          ${e}\n        )`,c.fillRect(o,i+160+s,8,8),y+=M}},I=(t,o,e,l)=>{const n=a.getContext("2d");n.beginPath(),n.moveTo(t,o),n.lineTo(e,l),n.strokeStyle="#00ff00",n.stroke()},g=(t,o)=>{r.fillStyle="yellow",r.fillRect(t,o,8,8)};(()=>{let t=0,o=0,e=0,l=0;document.addEventListener("keydown",(a=>{"KeyW"===a.code&&(t=1),"KeyS"===a.code&&(e=1),"KeyA"===a.code&&(o=1),"KeyD"===a.code&&(l=1)})),document.addEventListener("keyup",(a=>{"KeyW"===a.code&&(t=0),"KeyS"===a.code&&(e=0),"KeyA"===a.code&&(o=0),"KeyD"===a.code&&(l=0)}));const d=()=>{r.clearRect(0,0,a.width,a.height),i();let P=n,I=h;f=2*Math.cos(M),c=2*Math.sin(M),1===t&&(P+=f,I+=c),1===e&&(P-=f,I-=c),1===o&&(M-=.05,M<0&&(M+=2*Math.PI),f=5*Math.cos(M),c=5*Math.sin(M)),1===l&&(M+=.05,M>2*Math.PI&&(M-=2*Math.PI),f=5*Math.cos(M),c=5*Math.sin(M));let m=8;m=f<0?-3:8;let K=8;K=c<0?-3:8;let S=8;S=f>0?0:-8;let u=8;u=c>0?0:-8;const T=Math.floor((P+m)/64),v=Math.floor((I+K)/64),k=Math.floor((P-S)/64),w=Math.floor((I-u)/64),x=Math.floor(P/64),C=Math.floor(I/64);1===t&&(0===s[8*C+T]&&(n=P),0===s[8*v+x]&&(h=I)),1===e&&(0===s[8*C+k]&&(n=P),0===s[8*w+x]&&(h=I)),g(n,h),y(),requestAnimationFrame(d)};d()})(),y()})()})()})();