(()=>{"use strict";const t=[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=Math.PI,l=Math.PI/2,a=3*Math.PI/2;(()=>{const h=document.getElementById("canvas");let n=300,f=300,M=0,r=0,c=0;const s=64,i=[1,2,2,2,1,1,1,1,1,0,0,0,1,0,0,1,1,0,1,0,1,0,0,1,1,0,1,0,1,0,0,1,1,0,1,0,0,0,0,1,1,0,1,0,1,0,0,1,1,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1],d=()=>{for(let t=0;t<8;t++)for(let o=0;o<8;o++){const e=h.getContext("2d");e.fillStyle=i[8*o+t]>0?"#ffffff":"#000000";const l=t*s,a=o*s,n=l+s,f=a,M=l+s,r=a+s,c=l,d=a+s;e.beginPath(),e.moveTo(l+1,a+1),e.lineTo(n-1,f+1),e.lineTo(M-1,r-1),e.lineTo(c+1,d-1),e.closePath(),e.fill()}},y=(t,o,e,l)=>Math.sqrt((e-t)**2+(l-o)**2);d(),(()=>{const s=h.getContext("2d");s.fillStyle="yellow";s.fillRect(n,f,8,8);const P=()=>{const t=.0174533;let o=!1,h=c-30*t;h<0&&(h+=2*e),h>2*e&&(h-=2*e);let M,r,s,d,P,m,K,S,u,T=n,$=f;for(let v=0;v<60;v++){d=0;let R=1e7,b=-1/Math.tan(h);for(h>e?(m=64*Math.floor(f/64)-1e-4,P=(f-m)*b+n,K=-64,S=-K*b):h<e?(m=64*Math.floor(f/64)+64,P=(f-m)*b+n,K=64,S=-K*b):(P=n,m=f,d=8);d<8;)r=Math.floor(P/64),M=Math.floor(m/64),s=8*M+r,s>0&&s<64&&i[s]>0?(d=8,T=P,$=m,R=y(n,f,T,$,h)):(P+=S,m+=K,d+=1);d=0;let k=1e7,w=n,x=f,C=-Math.tan(h);for(h>l&&h<a?(P=64*Math.floor(n/64)-1e-4,m=(n-P)*C+f,S=-64,K=-S*C):h<l||h>a?(P=64*Math.floor(n/64)+64,m=(n-P)*C+f,S=64,K=-S*C):(P=n,m=f,d=8);d<8;)r=Math.floor(P/64),M=Math.floor(m/64),s=8*M+r,s>0&&s<64&&i[s]>0?(d=8,w=P,x=m,k=y(n,f,w,x,h)):(P+=S,m+=K,d+=1);k<R&&(P=w,m=x,u=k,o=!0),k>R&&(P=T,m=$,u=R,o=!1);I(n+4,f+4,P,m);let A=c-h;A<0&&(A+=2*e),A>2*e&&(A-=2*e),u*=Math.cos(A),g(8*v+530,20480/u,P,m,h,o),h+=t,h<0&&(h+=2*e),h>2*e&&(h-=2*e)}},g=(e,l,a,M,r,s)=>{const d=h.getContext("2d");let y=32/l,P=0;l>320&&(P=(l-320)/2,l=320);const g=160-l/2;let I,m,K=P*y;for(s?(m=Math.floor(M/2%32),r>Math.PI/2&&r<3*Math.PI/2&&(m=31-m)):(m=Math.floor(a/2%32),r<Math.PI&&(m=31-m)),I=0;I<l;I++){let l,h=Math.floor(a/64),n=8*Math.floor(M/64)+h;1===i[n]?l=t[32*Math.floor(K)+Math.floor(m)]:2===i[n]&&(l=o[32*Math.floor(K)+Math.floor(m)]);const f=255*l;d.fillStyle=`rgb(\n          ${f},\n          ${f},\n          ${f}\n        )`,d.fillRect(e,I+160+g,8,8),K+=y}for(I=g+l;I<320;I++){let t=I-160,l=r,a=Math.cos(c-r);m=n/2+158*Math.cos(l)*32/t/a,K=f/2+158*Math.sin(l)*32/t/a;const h=255*o[32*(31&Math.floor(K))+(31&Math.floor(m))];d.fillStyle=`rgb(\n          ${h},\n          ${h},\n          ${h}\n        )`,d.fillRect(e,I+160,8,8)}},I=(t,o,e,l)=>{const a=h.getContext("2d");a.beginPath(),a.moveTo(t,o),a.lineTo(e,l),a.strokeStyle="#00ff00",a.stroke()},m=(t,o)=>{s.fillStyle="yellow",s.fillRect(t,o,8,8)};(()=>{let t=0,o=0,e=0,l=0;document.addEventListener("keydown",(a=>{"KeyW"===a.code&&(t=1),"KeyS"===a.code&&(e=1),"KeyA"===a.code&&(o=1),"KeyD"===a.code&&(l=1)})),document.addEventListener("keyup",(a=>{"KeyW"===a.code&&(t=0),"KeyS"===a.code&&(e=0),"KeyA"===a.code&&(o=0),"KeyD"===a.code&&(l=0)}));const a=()=>{s.clearRect(0,0,h.width,h.height),d();let y=n,g=f;M=2*Math.cos(c),r=2*Math.sin(c),1===t&&(y+=M,g+=r),1===e&&(y-=M,g-=r),1===o&&(c-=.05,c<0&&(c+=2*Math.PI),M=5*Math.cos(c),r=5*Math.sin(c)),1===l&&(c+=.05,c>2*Math.PI&&(c-=2*Math.PI),M=5*Math.cos(c),r=5*Math.sin(c));let I=8;I=M<0?-3:8;let K=8;K=r<0?-3:8;let S=8;S=M>0?0:-8;let u=8;u=r>0?0:-8;const T=Math.floor((y+I)/64),$=Math.floor((g+K)/64),v=Math.floor((y-S)/64),R=Math.floor((g-u)/64),b=Math.floor(y/64),k=Math.floor(g/64);1===t&&(0===i[8*k+T]&&(n=y),0===i[8*$+b]&&(f=g)),1===e&&(0===i[8*k+v]&&(n=y),0===i[8*R+b]&&(f=g)),m(n,f),P(),requestAnimationFrame(a)};a()})(),P()})()})()})();